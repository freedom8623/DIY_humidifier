C51 COMPILER V9.60.7.0   WS2812B                                                           12/16/2023 22:58:58 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE WS2812B
OBJECT MODULE PLACED IN .\Objects\ws2812b.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE Driver\ws2812b.c LARGE WARNINGLEVEL(1) OPTIMIZE(8,SPEED) BROWSE INCDIR(.
                    -\Driver;.\User) DEBUG OBJECTEXTEND PRINT(.\Listings\ws2812b.lst) TABS(2) OBJECT(.\Objects\ws2812b.obj)

line level    source

   1          #include "ws2812b.h"
   2          
   3          void Delayus(int a)   //@24.000MHz
   4          {
   5   1        unsigned char i;
   6   1        while(a--)
   7   1          {
   8   2        i = 6;
   9   2        while (--i);
  10   2        }
  11   1      }
  12          
  13          void WS_SendData(uchar *_data)
  14          {
  15   1          uchar i = 0;
  16   1          uchar j = 0;
  17   1          uchar *p = (uchar*)_data;
  18   1        
  19   1          EA = 0;
  20   1          for (i = 0; i < 3; i++)
  21   1          {
  22   2              uchar tmpData;
  23   2              tmpData = *(p++);
  24   2              for (j = 0; j < 8; j++)
  25   2              {
  26   3                  if (((tmpData>>(7-j)) & 0x01) == 0)
  27   3                  {
  28   4                      LED = 1;
  29   4                      _nop_();_nop_();_nop_();_nop_();_nop_();_nop_(); _nop_();_nop_();
  30   4                      LED = 0;
  31   4                      Delayus(1);      
  32   4                  }
  33   3                  if(((tmpData>>(7-j)) & 0x01) == 1)
  34   3                  {
  35   4                      LED = 1;
  36   4                      Delayus(1); 
  37   4                      LED = 0;
  38   4                      _nop_();_nop_();_nop_(); _nop_();_nop_();_nop_();_nop_();_nop_();
  39   4                  }
  40   3              }
  41   2          }
  42   1          EA = 1;
  43   1      
  44   1          
  45   1      }
  46          
  47          void Delay300us()   //@24.000MHz
  48          {
  49   1        unsigned char i, j;
  50   1      
  51   1        i = 10;
  52   1        j = 87;
  53   1        do
  54   1        {
C51 COMPILER V9.60.7.0   WS2812B                                                           12/16/2023 22:58:58 PAGE 2   

  55   2          while (--j);
  56   2        } while (--i);
  57   1      }
  58          
  59          
  60          //void lightmode(unsigned int *new_light_mode)
  61          //{
  62          //  switch(*new_light_mode){
  63          //    case 0:
  64          //    WS_SendData(colorcode[0]);
  65          //    break;
  66          //  
  67          //    case 1:
  68          //    WS_SendData(colorcode[1]);
  69          //    break;
  70          //  
  71          //    case 2:
  72          //    WS_SendData(colorcode[2]);
  73          //    break;
  74          //  
  75          //    case 3:
  76          //    WS_SendData(colorcode[3]);
  77          //    break;
  78          //  
  79          //    case 4:
  80          //    WS_SendData(colorcode[4]);
  81          //    break;
  82          //  
  83          //    case 5:
  84          //    WS_SendData(colorcode[5]);
  85          //    break;
  86          //  }
  87          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    176    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       5
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
